<div class="page">
  <header class="page-header">
    <div>
      <h1>Eventos disponibles</h1>
      <p class="subtitle">Encuentra oportunidades de vinculaciÃ³n y acumula tus horas.</p>
    </div>
  </header>

  <section class="card">
    <div class="card-header">
      <h2>Eventos de vinculaciÃ³n</h2>
      <span class="count">({{ eventos?.length || 0 }})</span>
    </div>

    <div class="grid-eventos" *ngIf="(eventos?.length || 0) > 0; else sinEventos">
      <div class="tarjeta-evento" *ngFor="let evento of eventos" [class.finalizado]="esFinalizado(evento)">
        <div class="imagen-evento">
          <img
            *ngIf="evento.imageUrl; else sinImg"
            [src]="evento.imageUrl"
            [alt]="evento.name"
            loading="lazy"
          />
          <ng-template #sinImg>
            <div class="img-placeholder">Sin imagen</div>
          </ng-template>
        </div>

        <div class="contenido-tarjeta">
          <h3 class="titulo-evento">{{ evento.name }}</h3>

          <p class="fecha-evento">
            ğŸ“… {{ formatearFecha(evento.date) }}
          </p>

          <p class="muted">
            ğŸ“ {{ evento.location }} â€¢ {{ evento.modality }}
          </p>

          <div class="info-adicional">
            <span class="badge badge-horas">â±ï¸ {{ evento.hours }} horas</span>
            <span class="badge badge-cupos">ğŸ‘¥ {{ evento.slots }} cupos</span>
          </div>

          <div class="materia" *ngIf="evento.materiaNombre; else sinMateria">
            ğŸ“š {{ evento.materiaNombre }} {{ evento.materiaCodigo }} - {{ evento.materiaSeccion }}
          </div>
          <ng-template #sinMateria>
            <em class="muted">Sin materia asignada</em>
          </ng-template>
          
          <a
            class="btn btn-primary"
            [routerLink]="['/eventos/detalle-events', evento.id]"
            (click)="guardarEvento(evento)"
          >
            Ver detalles del evento
          </a>
        </div>
      </div>
    </div>

    <ng-template #sinEventos>
      <div class="empty-state">
        <div class="empty-icon">ğŸ“…</div>
        <div class="empty-text">
          <strong>No hay eventos disponibles.</strong>
          <div class="empty-sub">Vuelve mÃ¡s tarde o consulta con tu coordinador.</div>
        </div>
      </div>
    </ng-template>
  </section>

  <footer class="footer">
    <span>GestiÃ³n de horas de vinculaciÃ³n</span>
    <span class="dot">â€¢</span>
    <span>Eventos</span>
  </footer>
</div>
