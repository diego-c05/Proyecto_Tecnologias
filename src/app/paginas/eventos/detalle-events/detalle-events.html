<div class="contenedor-detalle" *ngIf="evento; else cargandoTpl">
  <header class="header-detalle">
    <button class="btn-volver" (click)="volver()">‚Üê Volver a eventos</button>
  </header>

  <div class="banner-evento">
    <img
      *ngIf="evento.imageUrl; else sinImg"
      [src]="evento.imageUrl"
      [alt]="evento.name"
    />
    <ng-template #sinImg>
      <div class="banner-sin-img">Sin imagen</div>
    </ng-template>

    <div class="overlay-banner" *ngIf="esFinalizado(evento)">
      <span class="badge-finalizado">Evento Finalizado</span>
    </div>
  </div>

  <div class="contenido-principal">
    <div class="columna-info">
      <h1 class="titulo-principal">{{ evento.name }}</h1>

      <div class="info-organizador">
        <div class="avatar-org">üìç</div>
        <div>
          <p class="nombre-org">Vinculaci√≥n CEUTEC</p>
          <p class="muted">{{ evento.location }} ‚Ä¢ {{ evento.modality }}</p>
        </div>
      </div>

      <section class="seccion">
        <h2>Descripci√≥n</h2>
        <p class="descripcion-larga">
          {{ evento.description || 'Sin descripci√≥n.' }}
        </p>
      </section>

      <section class="seccion">
        <h2>Detalles del evento</h2>
        <div class="highlights">
          <div class="highlight-item">üìç {{ evento.modality }}</div>
          <div class="highlight-item">‚è±Ô∏è {{ evento.hours }} horas</div>
          <div class="highlight-item">üë• {{ evento.slots }} cupos</div>
        </div>
      </section>

      <section class="seccion">
        <h2>Materia</h2>
        
        <div *ngIf="materia as m; else sinMateria">
          <p class="categoria-texto">
            <strong>{{ m.nombre }}</strong>
            {{ m.codigo }} - {{ m.seccion }}
          </p>
        </div>
        <ng-template #sinMateria>
          <em class="muted">Sin materia asignada</em>
        </ng-template>
        
      </section>

      <section class="seccion">
        <h2>Coordinador</h2>
        
        <div *ngIf="coordinador as c; else sinCoordinador">
          <p class="categoria-texto">
            <strong>{{ c.nombreCompleto }}</strong>
            {{ c.correoElectronico }} 
          </p>
        </div>
        <ng-template #sinCoordinador>
          <em class="muted">Sin Coordinador asignado</em>
        </ng-template>
        
      </section>
    </div>

    <div class="columna-inscripcion">
      <div class="tarjeta-sticky">
        <div class="estado-inscripcion" [class.finalizado]="esFinalizado(evento)">
          <span *ngIf="!esFinalizado(evento)">Inscripciones abiertas</span>
          <span *ngIf="esFinalizado(evento)">Evento Finalizado</span>
        </div>

        <p class="fecha-inscripcion">
          {{ formatearFechaCompleta(evento.date) }}
        </p>

        <button
          class="btn-inscribir"
          (click)="inscribirse()"
          [disabled]="esFinalizado(evento)"
        >
          {{ !esFinalizado(evento) ? 'Inscribirme al evento' : 'Inscripciones cerradas' }}
        </button>

        <div class="info-extra">
          <p>‚úì Confirmaci√≥n inmediata</p>
          <p>‚úì Acreditaci√≥n de horas autom√°tica</p>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #cargandoTpl>
  <div class="contenedor-detalle">
    <p *ngIf="cargando">Cargando evento...</p>
    <p *ngIf="!cargando">No se encontr√≥ el evento.</p>
  </div>
</ng-template>
